import{C as _,D as P,E as c,G as h,A as p,H as C,I as S,r as d,J as y,K as w,L as x,M as L,k as V,x as H,N as Q,w as X,O as Y,z as $,S as z,P as K,Q as W}from"./@vue-9fac9aaa.js";import{d as J,c as Z}from"./pinia-69449fab.js";import{c as ee,a as te,u as se}from"./vue-router-f638a451.js";import{u as T,c as oe}from"./vue-i18n-a324c9be.js";import{a as I}from"./axios-3a76d256.js";import"./@intlify-fdc60c1c.js";(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const e of a)if(e.type==="childList")for(const n of e.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&r(n)}).observe(document,{childList:!0,subtree:!0});function t(a){const e={};return a.integrity&&(e.integrity=a.integrity),a.referrerPolicy&&(e.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?e.credentials="include":a.crossOrigin==="anonymous"?e.credentials="omit":e.credentials="same-origin",e}function r(a){if(a.ep)return;a.ep=!0;const e=t(a);fetch(a.href,e)}})();const ae="modulepreload",ne=function(s){return"/"+s},A={},re=function(o,t,r){if(!t||t.length===0)return o();const a=document.getElementsByTagName("link");return Promise.all(t.map(e=>{if(e=ne(e),e in A)return;A[e]=!0;const n=e.endsWith(".css"),g=n?'[rel="stylesheet"]':"";if(!!r)for(let m=a.length-1;m>=0;m--){const v=a[m];if(v.href===e&&(!n||v.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${e}"]${g}`))return;const u=document.createElement("link");if(u.rel=n?"stylesheet":ae,n||(u.as="script",u.crossOrigin=""),u.href=e,document.head.appendChild(u),n)return new Promise((m,v)=>{u.addEventListener("load",m),u.addEventListener("error",()=>v(new Error(`Unable to preload CSS for ${e}`)))})})).then(()=>o()).catch(e=>{const n=new Event("vite:preloadError",{cancelable:!0});if(n.payload=e,window.dispatchEvent(n),!n.defaultPrevented)throw e})},ce=()=>re(()=>import("./HomeView-64104518.js"),["assets/HomeView-64104518.js","assets/@vue-9fac9aaa.js","assets/vue-i18n-a324c9be.js","assets/@intlify-fdc60c1c.js","assets/swiper-6cfad1ce.js","assets/swiper-523ba882.css","assets/pinia-69449fab.js","assets/vue-router-f638a451.js","assets/axios-3a76d256.js","assets/HomeView-2ae04b76.css"]),M=ee({history:te("/"),routes:[{path:"/",name:"home",component:ce}]});M.beforeEach((s,o,t)=>{t()});const ie="/img/loading.svg",le="/img/load.svg";const R=(s,o)=>{const t=s.__vccOpts||s;for(const[r,a]of o)t[r]=a;return t},ue=s=>(C("data-v-12d05a84"),s=s(),S(),s),pe={class:"loader"},de={class:"loader-content"},_e=ue(()=>c("div",{class:"img"},[c("img",{src:ie,alt:""}),c("div",{class:"circle"},[c("img",{src:le,alt:""})])],-1)),me={class:"content-text"},ve={__name:"VLoader",setup(s){const{t:o}=T();return(t,r)=>(_(),P("div",pe,[c("div",de,[_e,c("div",me,h(p(o)("generationText")),1)])]))}},fe=R(ve,[["__scopeId","data-v-12d05a84"]]),O=J("stateStore",()=>{const s=d(!1),o=d(null),t=d([]),r=d(!1),a=d(!1),e=d(!1),n=d(),g=d(),E=d(),u=d(!1),m=d(!1),v=i=>{m.value=i},B=i=>{u.value=i},N=()=>{s.value=!0},D=()=>{s.value=!1},q=async()=>{const i=window.API;try{const f=await I({baseURL:`${i}/api/costumes`,method:"GET",headers:{Accept:"application/json"}});t.value=f.data.map(l=>({...l,title:l.title,image:`${i}${l.image}`,author:l.author})),console.log("Данные из API загружены:",t.value)}catch(f){console.error("Ошибка при загрузке данных:",f)}finally{}},G=async(i,f)=>{r.value=!0;try{const l=await I({baseURL:`${window.API}/api/user_faces`,method:"POST",headers:{"Content-Type":"multipart/form-data",accept:"application/json"},data:i});l.data.success?(v(!0),g.value=l.data.faceSwapPhotoId,await k(l.data.faceSwapPhotoId),await F(l.data.faceSwapPhotoId,f)):b(!0)}catch{b(!0)}finally{r.value=!1}},F=async(i,f)=>{r.value=!0;try{const l=await I({baseURL:`${window.API}/api/qr?id=${i}&lang=${f}`,method:"GET",headers:{"Content-Type":"multipart/form-data",accept:"application/json"}});E.value=l.data}catch(l){throw l}finally{r.value=!1}},k=async i=>{const f=window.API;r.value=!0;try{const l=await I({baseURL:`${window.API}/api/face_swap_photos/${i}`,method:"GET",headers:{"Content-Type":"multipart/form-data",accept:"application/json"}});n.value=l.data,await document.createElement("img").setAttribute("src",f+n.value.image),console.log(n.value),r.value=!1}catch(l){console.error("Ошибка в getUserFaces:",l),console.log("error")}},j=i=>{o.value=i,console.log(o.value.id)},b=i=>{a.value=i};return{isManualVisible:s,selectedCostume:o,costumes:t,isLoading:r,isError:a,isSuccess:e,finalPerson:n,faceSwapId:g,qr:E,activeCanvas:u,activePhoto:m,setActivePhoto:v,setActiveCanvas:B,openManual:N,closeManual:D,fetchCostumes:q,setUserFaces:G,getUserFaces:k,setCostume:j,setIsError:b,setIsSuccess:i=>{e.value=i}}}),he="/img/errorline.svg";const ge=s=>(C("data-v-ca579eac"),s=s(),S(),s),ye={class:"popup"},we={class:"popup-error"},Ee={class:"popup-error-content"},$e={class:"content-title"},xe=ge(()=>c("div",{class:"content-line"},[c("img",{src:he,alt:"Error line"})],-1)),Le={class:"content-text"},Pe={__name:"ErrorPopup",setup(s){const{t:o}=T();return(t,r)=>(_(),P("div",ye,[c("div",we,[c("div",Ee,[c("div",$e,h(p(o)("errorTitle")),1),xe,c("div",Le,h(p(o)("errorText")),1)])])]))}},Ie=R(Pe,[["__scopeId","data-v-ca579eac"]]),be="/img/Close.png",Ce="/img/Line 1.png",Se="/img/Frame 23.png";const U=s=>(C("data-v-2a72ed21"),s=s(),S(),s),Te={key:0,class:"popup"},Re={class:"popup-container"},ke={class:"popup-title"},Ae=U(()=>c("div",{class:"popup-line"},[c("img",{src:Ce,alt:""})],-1)),Ve={class:"popup-list"},Me={class:"popup-list-item"},Oe={class:"popup-list-item"},Ue={class:"popup-list-item"},Be={class:"popup-list-item"},Ne={class:"popup-list-item"},De=U(()=>c("div",{class:"popup-footer"},[c("img",{class:"popup-footer-logo",src:Se,alt:""}),c("div",{class:"popup-footer-text"},"КАЗАНЬ, ТАТАРСТАН 2")],-1)),qe={__name:"VManual",setup(s){const o=O(),{t}=T();return(r,a)=>(_(),y(L,{name:"fade"},{default:w(()=>[p(o).isManualVisible?(_(),P("div",Te,[c("div",Re,[c("img",{onClick:a[0]||(a[0]=(...e)=>p(o).closeManual&&p(o).closeManual(...e)),class:"popup-close-button",src:be}),c("div",ke,h(p(t)("manual.title")),1),Ae,c("div",Ve,[c("div",Me,h(p(t)("manual.step1")),1),c("div",Oe,h(p(t)("manual.step2")),1),c("div",Ue,h(p(t)("manual.step3")),1),c("div",Be,h(p(t)("manual.step4")),1),c("div",Ne,h(p(t)("manual.step5")),1)]),De])])):x("",!0)]),_:1}))}},Ge=R(qe,[["__scopeId","data-v-2a72ed21"]]);const Fe=["src"],je={__name:"VCursor",setup(s){const o=d({x:0,y:0}),t=d(!1),r=n=>{o.value={x:n.clientX,y:n.clientY}},a=()=>{t.value=!0},e=()=>{t.value=!1};return V(()=>{window.addEventListener("mousemove",r),window.addEventListener("mousedown",a),window.addEventListener("mouseup",e)}),H(()=>{window.removeEventListener("mousemove",r),window.removeEventListener("mousedown",a),window.removeEventListener("mouseup",e)}),(n,g)=>(_(),P("div",{class:"custom-cursor",style:Q({top:`${o.value.y}px`,left:`${o.value.x}px`})},[c("img",{src:t.value?"/img/cursor-pressed.svg":"/img/cursor.svg",alt:"Custom Cursor"},null,8,Fe)],4))}},He={class:"main"},Qe={__name:"App",setup(s){const o=se(),t=O();return V(()=>{t.fetchCostumes().then(()=>{t.costumes.forEach(r=>{document.createElement("img").setAttribute("src",r.image)})})}),X(()=>t.isError,r=>{r&&setTimeout(()=>{t.setIsError(!1)},5e3)}),(r,a)=>{const e=Y("RouterView");return _(),P("main",He,[$(je),$(L,{name:"fade"},{default:w(()=>[p(t).isError?(_(),y(Ie,{key:0})):x("",!0)]),_:1}),$(e,null,{default:w(({Component:n})=>[n?(_(),y(L,{key:0,name:"fade-page",mode:"out-in"},{default:w(()=>[(_(),y(z,null,{default:w(()=>[(_(),y(K(n),{key:p(o).fullPath}))]),_:2},1024))]),_:2},1024)):x("",!0)]),_:1}),$(L,{name:"fade"},{default:w(()=>[p(t).isLoading?(_(),y(fe,{key:0})):x("",!0)]),_:1}),$(L,{name:"fade"},{default:w(()=>[p(t).isManualVisible?(_(),y(Ge,{key:0})):x("",!0)]),_:1})])}}},Xe={beforeMount:(s,o)=>{s.clickOutsideEvent=t=>{s===t.target||s.contains(t.target)||o.value()},document.addEventListener("click",s.clickOutsideEvent)},unmounted:s=>{document.removeEventListener("click",s.clickOutsideEvent)}},Ye=(s,o,t)=>{const r=()=>{const u=s.getBoundingClientRect(),m=t.clientY-u.y,v=t.clientX-u.x;e.style.position="absolute",e.style.height="5px",e.style.width="5px",e.style.borderRadius="100%",e.style.backgroundColor="#f2f2f2",e.style.left=`${v}px`,e.style.top=`${m}px`,t.target.appendChild(e)},a=()=>{const u=+o.value||50;n<=u?(n++,g-=.65/u,e.style.transform=`scale(${n})`,e.style.opacity=`${g}`):(e.remove(),clearInterval(E))},e=document.createElement("span");let n=1,g=.65;const E=setInterval(a,5);r()},ze={mounted:(s,o)=>{s.addEventListener("click",t=>Ye(s,o,t))}};const Ke={ru:{title:"Искусство",description:"Выберите картину и сделайте фото",errorTitle:"ПОВТОРИТЕ ПОПЫТКУ",errorText:"ПОСТАРАЙТЕСЬ НЕ ДВИГАТЬСЯ ИЛИ ВСТАНЬТЕ БЛИЖЕ К КАМЕРЕ",manual:{title:"Инструкция",step1:"1. ВЫБЕРИТЕ КАРТИНУ И НАЖМИТЕ НА НЕЁ",step2:"2. ПОДГОТОВЬТЕСЬ К ФОТО И НАЖМИТЕ НА КНОПКУ",step3:"3. ПОДОЖДИТЕ ПОКА ВАС СФОТОГРАФИРУЮТ",step4:"4. ВЫБЕРИТЕ ФОТО, ЕСЛИ ОНО ПОНРАВИЛОСЬ ИЛИ ПЕРЕДЕЛАЙТЕ ФОТО",step5:"5. ПЕРЕЙДИТЕ ПО QR-КОДУ И СОХРАНИТЕ ФОТО ЧЕРЕЗ TELEGRAM ИЛИ ВВЕДИТЕ СВОЮ ПОЧТУ"},generationText:`ПОДОЖДИТЕ
ПРОИСХОДИТ ГЕНЕРАЦИЯ КАРТИНЫ`,qrText:"Скачать фото",button:{buttonLike:"мне нравится",buttonRetry:"повторить попытку",buttonToMain:"перейти на главную"}},tt:{title:"Сынлы сәнгать",description:"Картинаны сайлагыз һәм фотога төшерегез",errorTitle:"Кабатлагыз",errorText:`Камерага якын килеп,
селкенмичә  басып торыгыз`,manual:{title:"ИНСТРУКЦИЯ",step1:"1. Үзегезгә ошаган картинаны сайлагыз һәм аңа басыгыз",step2:"2. Фотога төшәргә әзерләнегез һәм кнопкага басыгыз",step3:"3. Фото төшергәнне көтегез",step4:"4. Фото ошамаса яңадан төшү мөмкин",step5:"5. Фотогыз ошаса QR-код аша күчеп, фотоны TELEGRAMга күчерегез яки узегезнең почтагызга җибәрегез"},generationText:` Көтеп торыгыз
картинада генерация бара`,qrText:"Фотоны сакларга",button:{buttonLike:"Миңа ошады!",buttonRetry:"Кабатлагыз",buttonToMain:"Төп биткә күчегез"}}},We=oe({locale:"ru",fallbackLocale:"ru",messages:Ke});W(Qe).directive("ripple",ze).directive("outside",Xe).use(Z()).use(M).use(We).mount("#app");export{R as _,le as a,O as u};
